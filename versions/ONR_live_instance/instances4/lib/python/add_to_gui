Re-arrange roach configuration logic with program flag.

watchdog fix to stalling banks